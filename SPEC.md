# Nomad Korea 웹사이트 개선 사양서

## 프로젝트 개요

Supabase Auth SSR 연동 후 웹사이트 핵심 기능 개선 및 단순화 프로젝트입니다. 데이터베이스 없이 가짜 데이터로 점진적 개선을 진행합니다.

---

## Phase 1: 프로젝트 구조 정리 및 불필요한 페이지 제거

### 📋 이번 단계 개선 사항 오버뷰
프로젝트의 핵심 기능에 집중하기 위해 불필요한 페이지들을 제거하고, 홈페이지와 인증 관련 페이지만 남깁니다. 네비게이션을 단순화하여 사용자 경험을 개선합니다.

### ✅ 수정/개선해야 하는 기능
- [x] `app` 디렉토리 내 모든 페이지 파일 목록 확인
- [x] 홈페이지 (`page.tsx` 루트) 유지
- [x] 인증 관련 페이지 유지 (`/login`, `/auth/confirm`, `/error`)
- [x] 그 외 모든 페이지 디렉토리 삭제
- [x] 네비게이션 컴포넌트에서 불필요한 페이지 링크 제거
- [x] 인증 및 프로필 관련 버튼만 네비게이션에 유지
- [x] 삭제된 페이지로의 라우팅이 있는지 전체 코드베이스 검토
- [x] 불필요한 라우팅 제거

### ✅ 작업 완료 후 검증/확인 사항
- [x] 홈페이지(`/`)가 정상적으로 렌더링되는지 확인
- [x] `/login` 페이지 접근 가능 확인
- [x] `/auth/confirm` 라우트 핸들러 작동 확인
- [x] `/error` 페이지 접근 가능 확인
- [x] 삭제된 페이지 접근 시 404 또는 홈으로 리다이렉트 확인
- [x] 네비게이션에 인증/프로필 버튼만 존재하는지 확인
- [x] 콘솔 에러 없는지 확인

---

## Phase 2: 필터 시스템 구조 정의 및 타입 설정

### 📋 이번 단계 개선 사항 오버뷰
새로운 필터 시스템의 기반을 구축합니다. TypeScript 타입을 정의하고, 필터 옵션 상수를 생성하여 전체 애플리케이션에서 일관되게 사용할 수 있도록 합니다.

### 필터 정보 스펙
- **예산**: 100만원 미만, 100~200만원, 200만원 이상
- **지역**: 전체, 수도권, 경상도, 전라도, 강원도, 제주도, 충청도
- **환경**: 자연친화, 도심선호, 카페작업, 코워킹 필수
- **최고계절**: 봄, 여름, 가을, 겨울

### ✅ 수정/개선해야 하는 기능
- [x] 필터 타입 정의 파일 생성 (`types/filters.ts`)
- [x] 예산 필터 타입 및 옵션 정의 (100만원 미만, 100~200만원, 200만원 이상)
- [x] 지역 필터 타입 및 옵션 정의 (전체, 수도권, 경상도, 전라도, 강원도, 제주도, 충청도)
- [x] 환경 필터 타입 및 옵션 정의 (자연친화, 도심선호, 카페작업, 코워킹 필수)
- [x] 최고계절 필터 타입 및 옵션 정의 (봄, 여름, 가을, 겨울)
- [x] 도시 데이터 타입 정의 (City interface/type)
- [x] 필터 상수 파일 생성 (`constants/filters.ts`)
- [x] 각 필터별 옵션 배열 export

### ✅ 작업 완료 후 검증/확인 사항
- [x] TypeScript 컴파일 에러 없는지 확인
- [x] 필터 타입이 올바르게 정의되었는지 확인
- [x] 필터 상수가 정확한 값을 가지고 있는지 확인
- [x] 다른 파일에서 import하여 사용 가능한지 테스트
- [x] IDE에서 자동완성이 올바르게 작동하는지 확인

---

## Phase 3: 가짜 데이터 생성 및 필터 속성 추가

### 📋 이번 단계 개선 사항 오버뷰
Phase 2에서 정의한 타입과 필터를 기반으로 각 도시별 가짜 데이터를 생성합니다. 모든 도시에 예산, 지역, 환경, 최고계절 정보를 포함하여 필터링이 가능하도록 합니다.

### ✅ 수정/개선해야 하는 기능
- [ ] 기존 가짜 데이터 파일 위치 확인
- [ ] 가짜 데이터 파일 생성 또는 수정 (`data/cities.ts` 또는 `mock/cities.ts`)
- [ ] 각 도시별로 예산 정보 추가
- [ ] 각 도시별로 지역 정보 추가
- [ ] 각 도시별로 환경 정보 추가 (최소 1개 이상)
- [ ] 각 도시별로 최고계절 정보 추가
- [ ] 좋아요/싫어요 카운트 필드 추가 (초기값 설정)
- [ ] 최소 10개 이상의 다양한 도시 데이터 생성
- [ ] 각 필터 옵션별로 최소 1개 이상의 도시가 매칭되도록 데이터 분배

### ✅ 작업 완료 후 검증/확인 사항
- [ ] 모든 도시 데이터가 City 타입을 만족하는지 확인
- [ ] 각 도시에 예산, 지역, 환경, 최고계절 정보가 모두 있는지 확인
- [ ] 좋아요/싫어요 카운트가 숫자형으로 정의되었는지 확인
- [ ] 각 필터 값이 상수 파일의 값과 일치하는지 확인
- [ ] TypeScript 컴파일 에러 없는지 확인
- [ ] 데이터 import가 정상적으로 되는지 확인

---

## Phase 4: 별점/평점 제거 및 좋아요/싫어요 버튼 구현

### 📋 이번 단계 개선 사항 오버뷰
기존의 별점/평점 시스템을 제거하고, 간단한 좋아요/싫어요 버튼으로 대체합니다. 사용자 인터랙션에 따라 버튼 상태가 변경되고, 카운트가 증가/감소하는 기능을 구현합니다.

### ✅ 수정/개선해야 하는 기능
- [ ] 기존 별점/평점 컴포넌트 찾기
- [ ] 별점/평점 관련 코드 제거
- [ ] 좋아요/싫어요 버튼 컴포넌트 생성 (`components/LikeDislikeButton.tsx`)
- [ ] 좋아요 버튼 아이콘 추가 (활성/비활성 상태)
- [ ] 싫어요 버튼 아이콘 추가 (활성/비활성 상태)
- [ ] 좋아요 클릭 시 상태 토글 로직 구현
- [ ] 싫어요 클릭 시 상태 토글 로직 구현
- [ ] 좋아요 누르면 싫어요 자동 해제 로직 구현
- [ ] 싫어요 누르면 좋아요 자동 해제 로직 구현
- [ ] 버튼 클릭에 따른 아이콘 색상 변경 (활성: 색상, 비활성: 회색)
- [ ] 좋아요/싫어요 카운트 표시 UI 구현
- [ ] 버튼 클릭 시 카운트 증가/감소 로직 구현
- [ ] 로컬 상태 관리 (useState 또는 context)

### ✅ 작업 완료 후 검증/확인 사항
- [ ] 별점/평점이 완전히 제거되었는지 확인
- [ ] 좋아요 버튼 클릭 시 아이콘 색상 변경 확인
- [ ] 싫어요 버튼 클릭 시 아이콘 색상 변경 확인
- [ ] 좋아요 누를 때 싫어요가 자동 해제되는지 확인
- [ ] 싫어요 누를 때 좋아요가 자동 해제되는지 확인
- [ ] 좋아요 카운트가 올바르게 증가/감소하는지 확인
- [ ] 싫어요 카운트가 올바르게 증가/감소하는지 확인
- [ ] 버튼 재클릭 시 토글이 정상 작동하는지 확인
- [ ] UI가 반응형으로 잘 작동하는지 확인

---

## Phase 5: 카드 구조 변경 및 필터 정보 표시

### 📋 이번 단계 개선 사항 오버뷰
도시 카드의 구조를 변경하여 필터 정보(예산, 지역, 환경, 최고계절)를 Key-Value 형태로 명확하게 표시합니다. 사용자가 각 도시의 특성을 한눈에 파악할 수 있도록 개선합니다.

### 카드 구조 스펙
- **예산**: Key-Value 형태로 표시
- **지역**: Key-Value 형태로 표시
- **환경**: Key-Value 형태로 표시 (배열 처리)
- **최고계절**: Key-Value 형태로 표시
- **자세히 보기 버튼**: 제거

### ✅ 수정/개선해야 하는 기능
- [ ] 기존 도시 카드 컴포넌트 찾기
- [ ] 카드 레이아웃 재설계 (디자인 시안)
- [ ] 예산 정보 표시 영역 추가 (Key: "예산", Value: 필터 값)
- [ ] 지역 정보 표시 영역 추가 (Key: "지역", Value: 필터 값)
- [ ] 환경 정보 표시 영역 추가 (Key: "환경", Value: 필터 값, 배열 처리)
- [ ] 최고계절 정보 표시 영역 추가 (Key: "최고계절", Value: 필터 값)
- [ ] Key-Value 스타일링 (가독성 향상)
- [ ] 기존 불필요한 정보 제거
- [ ] 좋아요/싫어요 버튼 카드에 통합
- [ ] 반응형 레이아웃 적용
- [ ] "자세히 보기" 버튼 제거

### ✅ 작업 완료 후 검증/확인 사항
- [ ] 모든 도시 카드에 예산 정보가 표시되는지 확인
- [ ] 모든 도시 카드에 지역 정보가 표시되는지 확인
- [ ] 모든 도시 카드에 환경 정보가 표시되는지 확인
- [ ] 모든 도시 카드에 최고계절 정보가 표시되는지 확인
- [ ] Key-Value 형태가 명확하게 구분되는지 확인
- [ ] "자세히 보기" 버튼이 제거되었는지 확인
- [ ] 좋아요/싫어요 버튼이 카드 내에 잘 배치되었는지 확인
- [ ] 모바일/태블릿/데스크톱에서 레이아웃 확인
- [ ] 가짜 데이터가 올바르게 렌더링되는지 확인

---

## Phase 6: 메인 페이지 타이틀 변경 및 정렬 기능 구현

### 📋 이번 단계 개선 사항 오버뷰
메인 페이지의 타이틀을 "도시 리스트"로 변경하고, 모든 도시를 좋아요 순서대로 정렬하여 표시합니다. 사용자가 인기 있는 도시를 먼저 볼 수 있도록 개선합니다.

### ✅ 수정/개선해야 하는 기능
- [ ] 메인 페이지의 "TOP 추천 도시" 텍스트 찾기
- [ ] 타이틀을 "도시 리스트"로 변경
- [ ] 도시 정렬 함수 구현 (좋아요 수 기준 내림차순)
- [ ] 정렬된 도시 리스트를 상태로 관리
- [ ] 좋아요/싫어요 버튼 클릭 시 자동 재정렬 로직 구현
- [ ] 모든 도시 표시 (필터링 전 전체 리스트)
- [ ] 정렬 기준 표시 (선택사항: "좋아요 순")
- [ ] 동일 좋아요 수일 경우 두 번째 정렬 기준 설정 (예: 도시명 가나다순)

### ✅ 작업 완료 후 검증/확인 사항
- [ ] 페이지 타이틀이 "도시 리스트"로 변경되었는지 확인
- [ ] 도시들이 좋아요 수 내림차순으로 정렬되는지 확인
- [ ] 가짜 데이터의 모든 도시가 표시되는지 확인
- [ ] 좋아요 버튼 클릭 시 리스트가 재정렬되는지 확인
- [ ] 싫어요 버튼은 정렬에 영향을 주지 않는지 확인
- [ ] 동일 좋아요 수일 때 두 번째 정렬 기준이 작동하는지 확인
- [ ] 페이지 로드 시 정렬이 올바르게 적용되는지 확인
- [ ] 성능 이슈 없이 실시간 정렬이 되는지 확인

---

## Phase 7: 필터 UI 구현 및 필터링 기능 개발

### 📋 이번 단계 개선 사항 오버뷰
사용자가 예산, 지역, 환경, 최고계절로 도시를 필터링할 수 있는 UI와 기능을 구현합니다. 여러 필터를 조합하여 원하는 조건의 도시를 찾을 수 있도록 합니다.

### ✅ 수정/개선해야 하는 기능
- [ ] 필터 컴포넌트 생성 (`components/CityFilters.tsx`)
- [ ] 예산 필터 드롭다운/버튼 그룹 UI 구현
- [ ] 지역 필터 드롭다운/버튼 그룹 UI 구현
- [ ] 환경 필터 체크박스/버튼 그룹 UI 구현 (다중 선택 가능)
- [ ] 최고계절 필터 드롭다운/버튼 그룹 UI 구현
- [ ] 필터 상태 관리 (useState 또는 context)
- [ ] 필터링 로직 구현 (여러 조건 AND 연산)
- [ ] "전체" 옵션 처리 (지역 필터)
- [ ] 필터 초기화 버튼 구현
- [ ] 필터 적용 시 도시 리스트 업데이트
- [ ] 필터링된 결과도 좋아요 순으로 정렬
- [ ] 필터 결과 개수 표시
- [ ] 필터가 적용된 상태 시각적 표시

### ✅ 작업 완료 후 검증/확인 사항
- [ ] 예산 필터 선택 시 해당 예산 범위의 도시만 표시되는지 확인
- [ ] 지역 필터 선택 시 해당 지역의 도시만 표시되는지 확인
- [ ] 환경 필터 선택 시 해당 환경을 포함한 도시만 표시되는지 확인
- [ ] 최고계절 필터 선택 시 해당 계절이 최적인 도시만 표시되는지 확인
- [ ] 여러 필터 동시 적용 시 모든 조건을 만족하는 도시만 표시되는지 확인
- [ ] "전체" 선택 시 모든 도시가 표시되는지 확인
- [ ] 필터 초기화 버튼 클릭 시 모든 필터가 해제되는지 확인
- [ ] 필터링된 결과가 좋아요 순으로 정렬되는지 확인
- [ ] 필터 결과 개수가 정확하게 표시되는지 확인
- [ ] 결과가 없을 때 "해당하는 도시가 없습니다" 메시지 표시 확인
- [ ] 필터 UI가 사용하기 편리한지 확인
- [ ] 모바일 환경에서 필터 UI가 잘 작동하는지 확인

---

## Phase 8: 통합 테스트 및 최종 검증

### 📋 이번 단계 개선 사항 오버뷰
모든 기능이 통합된 상태에서 전체 시스템을 테스트하고, 사용자 시나리오를 검증합니다. 버그 수정 및 최종 UI/UX 개선을 진행합니다.

### ✅ 수정/개선해야 하는 기능
- [ ] 전체 사용자 플로우 테스트 시나리오 작성
- [ ] 홈페이지 → 필터링 → 좋아요/싫어요 전체 플로우 테스트
- [ ] 로그인 → 홈페이지 → 인터랙션 플로우 테스트
- [ ] 발견된 버그 수정
- [ ] UI/UX 개선 사항 정리 및 적용
- [ ] 반응형 디자인 전체 점검
- [ ] 접근성 개선 (키보드 네비게이션, aria-label 등)
- [ ] 성능 최적화 (메모이제이션, 불필요한 리렌더링 방지)
- [ ] 코드 리팩토링 (중복 코드 제거, 가독성 향상)
- [ ] 주석 및 문서화

### ✅ 작업 완료 후 검증/확인 사항
- [ ] 모든 페이지가 에러 없이 로드되는지 확인
- [ ] 필터링과 정렬이 동시에 올바르게 작동하는지 확인
- [ ] 좋아요/싫어요 상태가 일관되게 유지되는지 확인
- [ ] 로그인/로그아웃 후에도 기능이 정상 작동하는지 확인
- [ ] 브라우저 콘솔에 에러/경고가 없는지 확인
- [ ] 다양한 화면 크기에서 레이아웃이 깨지지 않는지 확인
- [ ] 다양한 브라우저(Chrome, Firefox, Safari)에서 테스트
- [ ] 키보드만으로 모든 기능 사용 가능한지 확인
- [ ] 페이지 로딩 속도가 적절한지 확인
- [ ] 모든 인터랙션이 부드럽게 작동하는지 확인
- [ ] 코드 품질 검토 완료
- [ ] 최종 사용자 시나리오 테스트 통과

---

## 전체 Phase 체크리스트

- [x] Phase 1: 프로젝트 구조 정리 및 불필요한 페이지 제거
- [x] Phase 2: 필터 시스템 구조 정의 및 타입 설정
- [ ] Phase 3: 가짜 데이터 생성 및 필터 속성 추가
- [ ] Phase 4: 별점/평점 제거 및 좋아요/싫어요 버튼 구현
- [ ] Phase 5: 카드 구조 변경 및 필터 정보 표시
- [ ] Phase 6: 메인 페이지 타이틀 변경 및 정렬 기능 구현
- [ ] Phase 7: 필터 UI 구현 및 필터링 기능 개발
- [ ] Phase 8: 통합 테스트 및 최종 검증

---

## 전체 실행 가이드

### 실행 순서
각 Phase는 순차적으로 실행되어야 하며, 이전 Phase가 완료되고 검증된 후 다음 Phase로 진행합니다.

### 에이전트 작업 시 참고사항
- [ ] 각 Phase는 독립적으로 실행 가능하도록 작성되었습니다
- [ ] Phase 시작 전 해당 Phase의 체크리스트를 모두 확인하세요
- [ ] Phase 완료 후 검증 체크리스트를 모두 확인하세요
- [ ] 가짜 데이터를 사용하며, 실제 데이터베이스 연동은 하지 않습니다
- [ ] 모든 상태는 클라이언트 측 로컬 상태로 관리합니다

### 주의사항
- [ ] **데이터베이스 연동 금지**: 모든 데이터는 가짜 데이터로 처리
- [ ] **변수명 카멜 케이스 준수**: 사용자 설정에 따라 모든 변수는 카멜 케이스로 작성
- [ ] **TypeScript 사용**: 모든 코드는 TypeScript로 작성
- [ ] **기존 Supabase Auth 유지**: 인증 시스템은 변경하지 않음

---

## 기술 스택

- **Framework**: Next.js 15.0.0
- **Language**: TypeScript 5
- **Styling**: Tailwind CSS 3.4.0
- **Authentication**: Supabase Auth SSR (@supabase/ssr 0.7.0)
- **State Management**: React Hooks (useState, useContext)
- **Data**: Mock/Fake Data (No Database)

---

## 프로젝트 구조

```
nomad-korea/
├── app/
│   ├── page.tsx                        # 홈페이지 (메인)
│   ├── login/
│   │   ├── page.tsx                    # 로그인 페이지
│   │   └── actions.ts                  # 서버 액션
│   ├── auth/
│   │   └── confirm/
│   │       └── route.ts                # 이메일 확인 핸들러
│   └── error/
│       └── page.tsx                    # 에러 페이지
├── components/
│   ├── LikeDislikeButton.tsx           # 좋아요/싫어요 버튼 (Phase 4)
│   ├── CityCard.tsx                    # 도시 카드 (Phase 5)
│   └── CityFilters.tsx                 # 필터 컴포넌트 (Phase 7)
├── types/
│   └── filters.ts                      # 필터 타입 정의 (Phase 2)
├── constants/
│   └── filters.ts                      # 필터 상수 (Phase 2)
├── data/ (또는 mock/)
│   └── cities.ts                       # 가짜 도시 데이터 (Phase 3)
├── utils/
│   └── supabase/
│       ├── client.ts                   # 브라우저 클라이언트
│       ├── server.ts                   # 서버 클라이언트
│       └── middleware.ts               # 미들웨어 헬퍼
├── .env.local                          # 환경 변수
├── middleware.ts                       # Next.js 미들웨어
└── SPEC.md                             # 이 문서
```

---

## 버전 히스토리

- **v1.0.0** (2025-10-20): 초기 SPEC 문서 작성
  - Supabase Auth SSR 연동 완료
  - 8단계 Phase 계획 수립
